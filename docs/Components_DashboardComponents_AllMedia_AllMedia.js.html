

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Harbour Bites FE documentation Components/DashboardComponents/AllMedia/AllMedia.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Harbour Bites FE documentation</h1>
                </a>
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    Documentation
                </a>
                
                 
                    
                        <a
                            class="link user-link "
                            href="https://github.com/shivamsharmaexternlabs/externlabs-restaurant"
                        >
                            Respository
                        </a>
                    
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"></div><div class="category"><h2>AdminProfilePage Functions</h2><h3>Global</h3><ul><li><a href="global.html#BannerImageUploadFun">BannerImageUploadFun</a></li><li><a href="global.html#LogoImageUploadFun">LogoImageUploadFun</a></li><li><a href="global.html#callBackFuncAfterSignUp">callBackFuncAfterSignUp</a></li><li><a href="global.html#handleOnChange1">handleOnChange1</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li></ul></div><div class="category"><h2>AllMedia</h2><h3>Global</h3><ul><li><a href="global.html#AllMedia">AllMedia</a></li></ul></div><div class="category"><h2>AllMedia Function</h2><h3>Global</h3><ul><li><a href="global.html#DeleteImageFun">DeleteImageFun</a></li><li><a href="global.html#MultiUploadFun">MultiUploadFun</a></li></ul></div><div class="category"><h2>App</h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li></ul></div><div class="category"><h2>Authentication</h2><h3>Global</h3><ul><li><a href="global.html#ForgotPassword">ForgotPassword</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li></ul></div><div class="category"><h2>Custom Hook</h2><h3>Global</h3><ul><li><a href="global.html#useDownloadQr">useDownloadQr</a></li><li><a href="global.html#useLogoutHook">useLogoutHook</a></li><li><a href="global.html#usePopUpHook">usePopUpHook</a></li></ul></div><div class="category"><h2>Dashboard Component</h2><h3>Global</h3><ul><li><a href="global.html#AdminProfilePage">AdminProfilePage</a></li><li><a href="global.html#DndCategories">DndCategories</a></li></ul></div><div class="category"><h2>DndCategories function</h2><h3>Global</h3><ul><li><a href="global.html#handleDndUpdate">handleDndUpdate</a></li><li><a href="global.html#handleDragOver">handleDragOver</a></li><li><a href="global.html#handleDrop">handleDrop</a></li><li><a href="global.html#startDrag">startDrag</a></li></ul></div><div class="category"><h2>KDS</h2><h3>Global</h3><ul><li><a href="global.html#KdsBox">KdsBox</a></li><li><a href="global.html#KdsScreen">KdsScreen</a></li></ul></div><div class="category"><h2>KdsBox Functions</h2><h3>Global</h3><ul><li><a href="global.html#handleConfirmation">handleConfirmation</a></li><li><a href="global.html#handleStartCooking">handleStartCooking</a></li><li><a href="global.html#processKdsData">processKdsData</a></li></ul></div><div class="category"><h2>KdsScreen function</h2><h3>Global</h3><ul><li><a href="global.html#handleLogout">handleLogout</a></li></ul></div><div class="category"><h2>Login</h2><h3>Global</h3><ul><li><a href="global.html#Login">Login</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#languageSwitchFun">languageSwitchFun</a></li><li><a href="global.html#useEffect">useEffect</a></li></ul></div><div class="category"><h2>i18n</h2><h3>Global</h3><ul><li><a href="global.html#middleware">middleware</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>Components/DashboardComponents/AllMedia/AllMedia.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Importing necessary dependencies and assets
import React, { useEffect } from 'react';
import './allmedia.css';
import DashboardLayout from '../DashboardLayout/DashboardLayout';
import DashboardSidebar from '../DashboardSidebar/DashboardSidebar';
import margerita from '../../../images/Margerita.png';
import upload from '../../../images/upload.svg';
import close from '../../../images/close2.svg'
import { useDispatch, useSelector } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import { reactLocalStorage } from 'reactjs-localstorage';
import { DeleteMediaLibrarySlice, GetMediaLibrarySlice, PostMediaLibrarySlice } from '../../../Redux/slices/mediaLibrarySlice';
import { toast } from "react-toastify";
import { LoadingSpinner } from '../../../Redux/slices/sideBarToggle';
import LodingSpiner from '../../LoadingSpinner/LoadingSpinner';
import { Helmet } from "react-helmet";
import useDownloadQr from '../../../CustomHooks/useDownloadQr';



/**
 * AllMedia functional component for managing media.
 * @returns {JSX.Element} AllMedia  component.
 * @category AllMedia
 * @subcategory Dasboard Component
 */

// Functional component for the AllMedia page
const AllMedia = ({ translaterFun }) => {
    // Hooks for managing state and navigation
    const dispatch = useDispatch();
    const navigate = useNavigate();

    const [DownloadQrHook, DownloadQrSetFun] = useDownloadQr("");

    // Retrieving data from local storage
    let BearerToken = reactLocalStorage.get("Token", false)
    const RestaurantId = reactLocalStorage.get("RestaurantId", false);

    // Selecting data from Redux store
    const MediaLibrarySelectorData = useSelector((state) => state?.MediaLibraryApiData);

    // Fetching media library data on component mount
    useEffect(() => {
        const fetchData = async () => {
            if (BearerToken !== false) {
                dispatch(LoadingSpinner(true))

                try {
                    await dispatch(GetMediaLibrarySlice({ RestaurantId, BearerToken }))
                    dispatch(LoadingSpinner(false))
                } catch (error) {
                    dispatch(LoadingSpinner(false))
                }
            }
        }

        fetchData()

    }, [BearerToken])


      /**
   * Handles Multiple upload of file.
   * @function MultiUploadFun
   * @param {Event} e - event.
   * @category AllMedia Function
   */
    // Handling multiple file upload
    const MultiUploadFun = async (e) => {
        await dispatch(LoadingSpinner(true))

        try {
            const multiUploadPayload = {
                images: e.target.files,
                restaurant_id: RestaurantId,
                BearerToken
            }

            await dispatch(PostMediaLibrarySlice(multiUploadPayload));
            await dispatch(LoadingSpinner(false))

        } catch (error) {
            await dispatch(LoadingSpinner(false))
        }
    }

    // Updating the media library data after successful image upload
    useEffect(() => {
        if (MediaLibrarySelectorData?.PostMediaLibraryReducerData?.status === 200) {
            dispatch(GetMediaLibrarySlice({ RestaurantId, BearerToken }))
        }
        // else if (MediaLibrarySelectorData?.error === "Rejected") {
        //     toast.success("Internal Server Error");
        // }
    }, [MediaLibrarySelectorData?.PostMediaLibraryReducerData, MediaLibrarySelectorData?.DeleteMediaLibraryReducerData]);

    // Function to download an image
    const DownlodImageFun = (e, items) => { 

        DownloadQrSetFun([{"qrcode":items}] ) 
    }

    
      /**
   * Handles deleting image.
   * @function DeleteImageFun
   * @param {Event} e - event.
   * @param {object} items - items data.
   * @category AllMedia Function
   */
    const DeleteImageFun = async (e, items) => {
        await dispatch(LoadingSpinner(true))
        try {
            let response = await dispatch(DeleteMediaLibrarySlice({ RestaurantId, BearerToken, media_url: items }))

            if (response?.payload?.status === 204) {
                toast.success(translaterFun("deleted-successfully"));
                await dispatch(GetMediaLibrarySlice({ RestaurantId, BearerToken }))
            }
            else {
                toast.success(translaterFun("internal-server-error"));
            }

            await dispatch(LoadingSpinner(false))
        } catch (error) {
            await dispatch(LoadingSpinner(false))
        }
    }

    console.log("MediaLibrarySelectorData", MediaLibrarySelectorData)

    // JSX structure for the AllMedia component
    return (
        &lt;>
            &lt;Helmet>
                &lt;title>Media Library | Harbor Bites&lt;/title>
                &lt;meta name="description" content="Effortlessly manage your digital assets in one place. Access, organize, and utilize your media library for enhanced restaurant presentation." />
                {/* &lt;link rel="icon" type="image/x-icon" href="./"/> */}
            &lt;/Helmet>
            &lt;DashboardLayout>
                &lt;div className='dasboardbody'>
                    &lt;DashboardSidebar />
                    &lt;div className='contentpart mediapage'>
                        &lt;div className='title'>
                            &lt;h2>{translaterFun("all-media")}&lt;/h2>
                            &lt;button type='button' className='btn1 mediaupload'>
                                &lt;svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                                    &lt;path d="M6.5 10.577V1.927L4.17 4.257L3.462 3.538L7 0L10.538 3.538L9.831 4.258L7.5 1.927V10.577H6.5ZM1.615 14C1.155 14 0.771 13.846 0.463 13.538C0.154333 13.2293 0 12.845 0 12.385V9.962H1V12.385C1 12.5383 1.064 12.6793 1.192 12.808C1.32067 12.936 1.46167 13 1.615 13H12.385C12.5383 13 12.6793 12.936 12.808 12.808C12.936 12.6793 13 12.5383 13 12.385V9.962H14V12.385C14 12.845 13.846 13.229 13.538 13.537C13.2293 13.8457 12.845 14 12.385 14H1.615Z" />
                                &lt;/svg>
                                &lt;input
                                    type='file'
                                    accept=".png, .jpg, .jpeg"
                                    multiple
                                    onChange={(e) => MultiUploadFun(e)}
                                />
                                {translaterFun("upload-images")}
                            &lt;/button>
                        &lt;/div>

                        &lt;ul className='medialist '>
                            {
                                MediaLibrarySelectorData?.GetMediaLibrarySliceReducerData?.data?.images?.map((items, id) => {
                                     
                                    return (
                                        &lt;li key={id}>
                                            &lt;figure>

                                                &lt;img src={items} alt='' />

                                                &lt;button type='button' className='btn uploadbutton' onClick={(e) => DownlodImageFun(e, items)}>
                                                    &lt;img src={upload} alt='upload' />
                                                &lt;/button>
                                                {/* DELETE BUTTON IN MEDIA LIBRARY */}
                                                {/* &lt;button type='button' className='btn closebtn' onClick={(e) => DeleteImageFun(e, items)}>
                                                    &lt;img src={close} alt='close upload' />
                                                &lt;/button> */}


                                                {/* &lt;button type='button' className='btn' onClick={(e) => DeleteImageFun(e, items)}>
                                                    &lt;img src={"jhgfdghj"} alt='upload' />
                                                &lt;/button> */}
                                            &lt;/figure>
                                            &lt;h4>{items?.split("/")?.[4]?.split(".")?.[0]}&lt;/h4>
                                        &lt;/li>
                                    );
                                })
                            }
                        &lt;/ul>
                    &lt;/div>
                &lt;/div>
            &lt;/DashboardLayout>
            &lt;LodingSpiner />
        &lt;/>
    )
}

// Exporting the AllMedia component
export default AllMedia;
</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>


</body>
</html>
